<div id="connect-add" class="clearfix" ng-controller="addConnectionCtrl">
  <div class="connect-add-menu">
    <ul class="nav nav-tabs">
      <li ng-class="{ 'active' : currentSubPage === 'server' }">
        <a ng-click="currentSubPage = 'server'">Server</a>
      </li>
      <li ng-class="{ 'active' : currentSubPage === 'auth' }">
        <a ng-click="currentSubPage = 'auth'">Authentication</a>
      </li>
      <li ng-class="{ 'active' : currentSubPage === 'ssh' }">
        <a ng-click="currentSubPage = 'ssh'">SSH</a>
      </li>
    </ul>
  </div>
  <form class="form-horizontal" name="addForm" novalidate>
    <div class="sub-page" ng-show="currentSubPage === 'server'">
      <div class="form-group" ng-class="{ 'has-error' : !addForm.name.$valid && addConnectionFormSubmitted }">
        <label class="col-sm-4 control-label">Connection Name</label>
        <div class="col-sm-8">
          <input class="form-control" ng-model="addConnectionForm.name" name="name" type="text" required>
        </div>
      </div>
      <div class="form-group" ng-class="{ 'has-error' : !addForm.host.$valid && addConnectionFormSubmitted }">
        <label class="col-sm-4 control-label">Server Host</label>
        <div class="col-sm-8">
          <input class="form-control" ng-model="addConnectionForm.host" name="host" type="text" required placeholder="localhost">
        </div>
      </div>
      <div class="form-group" ng-class="{ 'has-error' : !addForm.port.$valid && addConnectionFormSubmitted }">
        <label class="col-sm-4 control-label">Server Port</label>
        <div class="col-sm-8">
          <input class="form-control" ng-model="addConnectionForm.port" name="port" type="text" required placeholder="27017">
        </div>
      </div>
    </div>
    <div class="sub-page" ng-show="currentSubPage === 'auth'">
      <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
          <div class="checkbox">
            <label>
              <input ng-model="addConnectionForm.enableAuth" name="enableAuth" type="checkbox"> Use authentication
            </label>
          </div>
        </div>
      </div>
      <div class="form-group" ng-class="{ 'has-error' : !addForm.name.$valid && addConnectionFormSubmitted }">
        <label class="col-sm-4 control-label">Database Name</label>
        <div class="col-sm-8">
          <input class="form-control" ng-model="addConnectionForm.databaseName" name="databaseName" type="text" ng-disabled="!addConnectionForm.enableAuth">
        </div>
      </div>
      <div class="form-group" ng-class="{ 'has-error' : !addForm.username.$valid && addConnectionFormSubmitted }">
        <label class="col-sm-4 control-label">Username</label>
        <div class="col-sm-8">
          <input class="form-control" ng-model="addConnectionForm.auth.username" name="username" type="text" ng-disabled="!addConnectionForm.enableAuth">
        </div>
      </div>
      <div class="form-group" ng-class="{ 'has-error' : !addForm.password.$valid && addConnectionFormSubmitted }">
        <label class="col-sm-4 control-label">Password</label>
        <div class="col-sm-8">
          <input class="form-control" ng-model="addConnectionForm.auth.password" name="password" type="text" ng-disabled="!addConnectionForm.enableAuth">
        </div>
      </div>
    </div>
    <div class="sub-page" ng-show="currentSubPage === 'ssh'">
      <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
          <div class="checkbox">
            <label>
              <input ng-model="addConnectionForm.enableSSH" name="enableSSH" type="checkbox"> Use SSH tunnel
            </label>
          </div>
        </div>
      </div>
      <div class="form-group" ng-class="{ 'has-error' : addForm.enableSSH && !addForm.sshHost.$valid && addConnectionFormSubmitted }">
        <label class="col-sm-4 control-label">SSH Host</label>
        <div class="col-sm-8">
          <input class="form-control" ng-model="addConnectionForm.sshHost" name="sshHost" type="text" ng-disabled="!addConnectionForm.enableSSH">
        </div>
      </div>
      <div class="form-group" ng-class="{ 'has-error' : addForm.enableSSH && !addForm.sshPort.$valid && addConnectionFormSubmitted }">
        <label class="col-sm-4 control-label">SSH Port</label>
        <div class="col-sm-8">
          <input class="form-control" ng-model="addConnectionForm.sshPort" name="sshPort" type="text" ng-disabled="!addConnectionForm.enableSSH">
        </div>
      </div>
    </div>
  </form>
  <div class="clearfix">
    <div class="add-buttons pull-right">
      <button class="btn btn-default" type="button" ng-click="changePage('list', null, $event)">
        Back
      </button>
      <button class="btn btn-primary" type="button" ng-click="addOrUpdateConnection(addForm, $event)">
        {{ selectedConnection ? 'Save' : 'Create' }}
      </button>
    </div>
  </div>
</div>
